#+title: AR - Lesson 07
#+date: <2021-11-08 lun>
#+teacher: Miriam Di Ianni
#+setupfile: ../../org-template/appunti.org

Fin ora abbiamo analizzato le reti dal punto di vista /statistico/, disinteressandoci delle caratteristiche dei singoli nodi e soffermandoci su ciò che *mediamente* accadeva.
...

* Reti con struttura disomogenea

** Esperimento di Granovetter
   Nel 1960, il sociologo Mark Granovetter prosope il seguente esperimento nella sua tesi di dottorato:
   intervistò una serie di persone che di recente avevano cambiato lavoro, facendo domande poste a capire in che modo erano venuti a conoscenza della nuova opportunità lavorativa.
   Come ci si può aspettare la gran parte delle persone erano venuti a conoscenza dell'opportunità da lavoro tramite passaparola.
   Ciò che invece era meno atteso, è che un gran numero di volte l'informazione arrivò da gente che si conosceva superficialmente.
   Questo fu sorprendente perché ci si aspetta che gli amici più stretti siano quelli più interessati ad aiutarsi nel momento del bisogno.\\

   Una risposta al fenomeno proposta da Granovetter fu che le persone a noi strette in realtà tendono ad avere le stesse nostre informazioni.
   Infatti è normale che se frequentino più o meno gli stessi posti e persone di un amico stretto.
   Oppure, se ho una relazione stretta con una persona è perché ci ho parlato molto nel tempo, e quindi tutte le informazioni importanti che tale persona poteva darmi
   me le avrà già date in passato.
   Contrariamente, una persona che conosco poco probabilmente frequenterà altri posti e persone, e quindi avrà accesso ad altre /fonti di informazioni/ che provengono
   al di fuori della mia /comunità/.\\

** Bridges e Local Bridges
   Come si può intuire dall'esperimento di Granovetter i contatti che più sono rilevanti nella diffusione di informazioni in una rete sono quei contatti che collegano due comunità differenti.
   Sulla base di questo si può definire il concetto di *bridge edge*, ovvero tutti quegli archi la cui rimozione disconnette la rete.
   Ovviamente i bridge edges sono archi /cruciali/ per l'accesso alle informazioni, in quanto senza di essi una informazione non potrebbe uscire dalla sua componente.\\

   In una rete sociale reale (e artificiale) è davvero molto poco probabile che esistano bridge edges, anche perché sappiamo già che le reti sociali presentano delle
   componenti giganti con buona probabilità.
   Rilassiamo quindi la totale disconnessione dovuta alla rimozione di tali archi, e definiamo il concetto di *local bridge*.
   Formalmente un arco $(u,v)$ è detto local bridge se $u$ e $v$ non hanno altri amici in comuni, ovvero se $N(u) \cup N(v) \equiv \emptyset$.

   #+caption: In rosso il local bridge
   #+ATTR_HTML: :style max-width:450px; :width 100%
   [[file:../images/ar-lesson07-img1.png]]
  
   Possiamo vedere i local bridge come archi la cui rimozione aumenta la distanza tra le due estremita di _almeno_ 2.

** Strong & Weak Ties
   L'esperimento di Granovetter mostra che le informazioni sono veicolate tramite le conoscenze più deboli, proprio perché permettono di accingere ad altre fonti di informazioni.
   Possiamo quindi definire un modello di rete in cui gli archi sono partizzionati tra archi *forti* (*strong ties*) e archi *deboli* (*weak ties*), che appunto rappresentano
   i tipi di legami che le persone possono avere.
   Certamente in un contesto reale esiste un largo range di tipi di amicizie e conoscenze che ci possono essere tra due individui, però per semplicità cataloghiamo
   i tipi di conoscenze solo nelle due categorie *strong* e *weak*.\\
   
   Più formalmente definiamo questo modello con un grafo \(G=(V,S\cup W)\), dove \(S\) è l'insieme degli strong ties e \(W\) è quello dei weak ties.
   Importante specificare che i due insiemi sono disgiunti, infatti una persona non può essere sia amica stretta che amica superficiale di un'altra (a meno che
   non sia una persona falsa, ma questo è un altro discorso...).
   \[
   S \cup W \equiv \emptyset
   \]


** The Strong Triadic Closure Property
   Consideriamo lo stato di una rete sociali in un dato istante, sarebbe interessante sapere come si evolve nel tempo e quali sono i meccanismi che portano alla creazione
   o alla rottura di nuovi archi.\\

   Un principio abbastanza intuitivo è il seguente:
   #+begin_quote
   se due nodi hanno un amico stretto in comune, allora è molto probabile che in futuro entrino in contatto e stabiliscano anchessi un rapporto di amicizia stretta.
   #+end_quote
   Ciò che si genera quindi tra i tre nodi in questione è la cosidetta *chiusura triadica*.\\

   Pensando la chiusura triadica in termini di strong e weak ties possiamo definirla secondo la seguente regola
   #+begin_quote
   Sia il nodo $a$ e due suoi vicini $b$ e $c$, allora l'arco $(b,c)$ probabilmente si creerà se $(a,b),(a,c) \in S$, ovvero se sono /strong ties/.
   #+end_quote

   Diremo che quindi il nodo $u$ rispetta la *Strong Triadic Closure Property* (=STCP= in breve) se
   \[
   \forall (u,v), (u,w) \in S \left[ (v,w) \in S \cup W \right]
   \]

   Infine diciamo che $G$ soddisfa la =STCP= se _tutti_ i suoi nodi la soddisfano.\\

   Se si osserva bene, quando una rete soddisfa la =STCP= essa si *stabilizza* secondo la regola precedentemente descritta, ovvero in futuro non si genereranno più altri archi.

** STCP e Local Bridges
   *THM*
   Sia una rete \(G=(V,S\cup W)\), un nodo $u \in V$ che soddisfa la =STCP= e due suoi vicini $x,y$ tali che $(u,x) \in S$ e $(u,y)$ è un /local bridge/ (ovvero \(N(u) \cup N(y) \equiv \emptyset\) )
   allora certamente $(u,y) \in W$ (è un /weak tie/).

   *Proof*
   Se per assurdo $(u,y) \in S$.
   Dato che $u$ soddisfa la =STCP= allora deve essere vero che esiste l'arco $(x,y)$, e quindi $x \in N(y)$.
   Ma poiché \(N(u) \cup N(y) \equiv \emptyset\) e $x \in N(u)$, allora deve essere vero che $x \not\in N(y)$ (*assurdo*)
   \(\implies (u,y) \in W\) $\square$.\\

   Il teorema precedentemente enunciato mostra come una proprietà che ha effetti globali (ovvero essere un /local bridge/) involve in una
   proprietà strettamente locale (ovvere essere un /weak ties/).
   Infatti la proprietà di /weak ties/ è visibile dal punto di vista locale da parte di un nodo: ogni persona sà se un suo amico è stretto o alla lontana.
   Viceversa, la proprietà di un arco di essere un /local edge/ non intuibile da parte di un nodo.
   Infatti, dato che un nodo conosce solo il suo vicinato non può sapere sapere se ha vicini in comune con un altro suo vicino.\\

* Comunità e Coefficiente di Clustering
  Abbiamo definito in precedenza un modello di rete dinamica i cui archi si modificano nel tempo, e dove la rete si stabilizza nel momento
  in cui essa soddisfa la =STCP=.
  Dato che si generano tanti triangoli, allora nel grafo stabilizzato si creeranno gruppi di nodi *fortemente coesi* da una densa quantità di archi.
  Chiameremo questi gruppi fortemente coesi *comunità*, o *cluster*.\\

  La precedente è una definizione informale e discorsiva.
  Dal punto di vista formale, quando possiamo dire che un gruppo di nodi è abbastanza /coeso/ da essere definito comunità?
  E che significa /coeso/?\\

  Per fare ciò iniziamo col *quantificare* la coesione del nodo $u$ all'interno dei suoi vicini.
  Sia quindi il *coefficiente di clustering* 
  \begin{align*}
    c(u)
    &= \frac{ \vert \lbrace (x,y) \in E : x \in N(u) \land y \in N(u) \rbrace \vert }{ \binom{N(u)}{2}  }\\
    &= \frac{ \vert \lbrace (x,y) \in E : x \in N(u) \land y \in N(u) \rbrace \vert }{ \frac{ \vert N(u) \vert (\vert N(u) \vert - 1) }{2}  }
  \end{align*}
  Intuitivamente tale valore cerca di misuare quanto un nodo $u$ è /ben inserito/ nel gruppo sociale formato dai suoi vicini.
  Infatti tale quantità calcola il rapporto tra i triangoli che coinvolgono $u$ e il numero massimo possibile di relazioni che possono
  esistere tra tutti i suoi vicini.
  Se un nodo ha un coefficiente di clustering basso vuol dire che si trova in una posizione periferica rispetto ai suoi mici.
  Viceversa, un nodo con un coefficiente di clustering è ben inserito tra i suoi amici, e quindi diremo che è un elemento *centrale* nella
  sua cerchia di conoscenze.\\

  Possiamo quindi vedere e riferirci al coefficiente di clustering come *indice di centralità* di un nodo.\\

  Analogamente possiamo definire un coefficiente di clustering relativo a un sottoinsieme $C$ di nodi.
  Ovvero, dato un sottoinsieme \(C \subseteq V\) definiamo il /coefficiente di clustering di $u$ relativo a $C$/ come la quantità
  \begin{align*}
    c_C(u)
    &= \frac{ \vert \lbrace (x,y) \in E : x \in N(u) \cap C \land y \in N(u) \cap C \rbrace \vert }{ \binom{N(u) \cap C}{2}  }\\
    &= \frac{ \vert \lbrace (x,y) \in E : x \in N(u) \cap C \land y \in N(u) \cap C \rbrace \vert }{ \frac{ \vert N(u) \cap C \vert (\vert N(u) \cap C \vert - 1) }{2}  }
  \end{align*}
  Questa quantità definisce quanto il nodo $u$ è integrato all'interno del sottoinsieme di nodi $C$:
  più il coefficiente $c_C(u)$ è elevato più $u$ è /centrale/ all'interno di $C$, contrariamente più è basse, meno $u$ è integrato.\\

  Perciò potremmo dire che se $C$ ha tutti nodi con coefficiente di clustering alto, allora $C$ è una *comunità* (o *cluster*).
  Ma di preciso quanto deve essere elevato questo valore per poter dire che $C$ è una comunità?\\
  Inoltre il coefficiente di clustering è un buon fattore da considerare per identificare le comunità?\\

* Alcuni tipi di Comunità
** Cut-Communities
   Dato un grafo $G = (V,E)$ e una coppia di nodi $s,t \in V$, diciamo che una *cut-community* rispetto a $s,t$ è un sottoinsieme
   proprio e non vuoto dei nodi $C \subset V$ (con $C \not\equiv \emptyset$) tale che $s \in C$ e $t \in \overline{C} \equiv V \setminus C$, e tale 
   che questo sottoinsieme _minimizza_ gli archi del taglio $(C,\overline{C})$, ovvero
   \[
   \vert (C, \overline{C}) \vert = \min_{A \subset V}{\lbrace \vert (A, \overline{A}) \vert : s \in A \land t \in \overline{A} \rbrace } 
   \]
   
   Citando il [[https://en.wikipedia.org/wiki/Max-flow_min-cut_theorem][Max-Flow/Min-Cut Theorem]], trovare un \( s \)-\( t \) cut minimo equivale a trovare il flusso massimo tra $s$ e $t$.
   Perciò, dati $s$ e $t$ possiamo trovare una cut community grazie all'algoritmo di max-flow /[[https://en.wikipedia.org/wiki/Ford%E2%80%93Fulkerson_algorithm][Ford&Fulkerson]]/.\\

   Perciò, per trovare una cut comunity che sia la più coesa possibile, si potrebbero calcolare tutti gli \( s \)-\( t \) cut minimi e
   scegleire quello più piccolo.
   Osservare che questo si può fare in /tempo polinomiale/[fn:1].\\

   Il problema di questo metodo è che non c'è modo di controllare la dimensione della comunità $C$ risultante, infatti potrebbe capitare
   che $C$ sia composta dal solo elemento $s$, e ciò è in disaccordo col concetto intuitivo di comunità (una sola persona non può costituire
   una comunità).\\

   Consideriamo infatti il seguente esempio:
   #+begin_center
   immagine
   #+end_center
   abbiamo un grafo $G$ composto dall'unione di due /clique/ $K_5$
   \[
   G = K_5^{(u)} \cup K_5^{(v)}
   \]

[fn:1] ovvero in tempo \(O(n^c)\) per qualche costante \( c > 0 \).
